\input sys/inputs.tex

\begin{document}

\bigheading{Counterspells}

% \info{task_name}{infile}{outfile}{points}{timelimit}{memlimit}
% leave this values, if you are not interested
\info{counterspells}{stdin}{stdout}{100}{1000 ms}{1 GB}

\emph{Magic the Gathering} card game has an interesting game mechanic
of casting and countering spells. We are not going to explain it here,
as it's quite complex and not necessary to solve this task. However, if 
you are a MtG player, you may see how this task is related to the spell
countering mechanic.

\heading{Task}

For each rooted tree there is a unique way of coloring its vertices by two colors
(black and white) satisfying the following constraint:
\begin{itemize}
\item A vertex is white if and only if it has a black son.
\end{itemize}

Uniqueness of this coloring can be easily proven by induction.
We will call a tree \emph{well-colored} if it's colored in this way.


We start with a rooted tree consisting of one black vertex (the root) and do
the following operation $n$-times:

\begin{itemize}
\item $add(v)$ -- Add a new black vertex to the tree as a son of vertex $v$. Then
                  invert colors of some (possibly zero, possibly all) vertices in
                  the tree so that the resulting tree is well-colored.
\end{itemize}

For each operation, we want to know how many vertices are inverted during this operation.

\heading{Input}

The root of the tree is numbered $0$, other vertices are numbered $1, 2, \dots, n$ in the 
order they are added to the tree.

The first line of the input contains a single integer $n$ ($1 \leq n \leq 200000$) -- 
number of vertex additions.

$n$ lines follow, $i$-th of them containing number $v_i$ -- ID of father of vertex added in
$i$-th operation. It's guaranteed that vertex $v_i$ already exists before $i$-th operation,
that is $v_i < i$.

\heading{Output}

For each operation output one line containing number of vertices whose colors will be inverted
during this operation.

\heading{Subtasks}

\centering
\begin{tabular}{|l|l|l|l|}
\hline
subtask & points & maximum $N$ & additional constraint                  \\ \hline
1       & 20     & 1000      &                                        \\ \hline
2       & 20     & 10000     &                                        \\ \hline
3       & 20     & 50000     &                                        \\ \hline
4       & 20     & 200000    & Depth of the final tree is at most 100 \\ \hline
5       & 20     & 200000    &                                        \\ \hline
\end{tabular}

\heading{Samples}


\sampleIN
5
0
1
2
1
3
\sampleOUT
1
2
3
2
2
\sampleCOMMENT
The situation after each operation looks like this (vertices inverted during previous operation are highlighted):
\sampleEND
\center{
\includegraphics[width=12cm]{img/counterspells}
}
\end{document}
